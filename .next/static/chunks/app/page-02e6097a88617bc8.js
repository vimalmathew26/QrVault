(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{235:(e,a,t)=>{"use strict";t.d(a,{J:()=>o});var s=t(5155),r=t(2115),l=t(489),n=t(3101),d=t(5016);let i=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.b,{ref:a,className:(0,d.cn)(i(),t),...r})});o.displayName=l.b.displayName},2643:(e,a,t)=>{Promise.resolve().then(t.bind(t,8362)),Promise.resolve().then(t.t.bind(t,2619,23))},3209:(e,a,t)=>{"use strict";t.d(a,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>d});var s=t(5155),r=t(2115),l=t(5016);let n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...r})});n.displayName="Card";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});d.displayName="CardHeader";let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("font-semibold leading-none tracking-tight",t),...r})});i.displayName="CardTitle";let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},5016:(e,a,t)=>{"use strict";t.d(a,{cn:()=>l});var s=t(2821),r=t(5889);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.$)(a))}},6170:(e,a,t)=>{"use strict";t.d(a,{p:()=>n});var s=t(5155),r=t(2115),l=t(5016);let n=r.forwardRef((e,a)=>{let{className:t,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...n})});n.displayName="Input"},7001:(e,a,t)=>{"use strict";t.d(a,{T:()=>n});var s=t(5155),r=t(2115),l=t(5016);let n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...r})});n.displayName="Textarea"},7003:(e,a,t)=>{"use strict";t.d(a,{$:()=>o});var s=t(5155),r=t(2115),l=t(2467),n=t(3101),d=t(5016);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,a)=>{let{className:t,variant:r,size:n,asChild:o=!1,...c}=e,m=o?l.DX:"button";return(0,s.jsx)(m,{className:(0,d.cn)(i({variant:r,size:n,className:t})),ref:a,...c})});o.displayName="Button"},8362:(e,a,t)=>{"use strict";t.d(a,{default:()=>I});var s=t(5155),r=t(2115),l=t(2769),n=t(574),d=t(5016);let i=n.bL,o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.B8,{ref:a,className:(0,d.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...r})});o.displayName=n.B8.displayName;let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.l9,{ref:a,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...r})});c.displayName=n.l9.displayName;let m=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.UC,{ref:a,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});m.displayName=n.UC.displayName;var u=t(3209),f=t(6170),x=t(6997),p=t(4033),g=t(2108),h=t(5917);let b=x.bL;x.YJ;let v=x.WT,w=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(x.l9,{ref:a,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[r,(0,s.jsx)(x.In,{asChild:!0,children:(0,s.jsx)(p.A,{className:"h-4 w-4 opacity-50"})})]})});w.displayName=x.l9.displayName;let N=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(x.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})});N.displayName=x.PP.displayName;let j=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(x.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(p.A,{className:"h-4 w-4"})})});j.displayName=x.wn.displayName;let y=r.forwardRef((e,a)=>{let{className:t,children:r,position:l="popper",...n}=e;return(0,s.jsx)(x.ZL,{children:(0,s.jsxs)(x.UC,{ref:a,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[(0,s.jsx)(N,{}),(0,s.jsx)(x.LM,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(j,{})]})})});y.displayName=x.UC.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(x.JU,{ref:a,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",t),...r})}).displayName=x.JU.displayName;let C=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(x.q7,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(x.VF,{children:(0,s.jsx)(h.A,{className:"h-4 w-4"})})}),(0,s.jsx)(x.p4,{children:r})]})});C.displayName=x.q7.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(x.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=x.wv.displayName;var R=t(926);let k=(0,R.createServerReference)("60c321f7b76cceaa4863ad8274a5f62a2eb0b75a3f",R.callServer,void 0,R.findSourceMapURL,"updateGeneratedCodeLabel"),S=(0,R.createServerReference)("60cc3d0539599e499292650171dd41c432233812b6",R.callServer,void 0,R.findSourceMapURL,"updateScannedCodeNote");var L=t(9511),A=t(5229);let D=L.bL;L.l9;let z=L.ZL,_=L.bm,T=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(L.hJ,{ref:a,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});T.displayName=L.hJ.displayName;let U=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(z,{children:[(0,s.jsx)(T,{}),(0,s.jsxs)(L.UC,{ref:a,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[r,(0,s.jsxs)(L.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(A.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});U.displayName=L.UC.displayName;let E=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};E.displayName="DialogHeader";let Z=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};Z.displayName="DialogFooter";let J=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(L.hE,{ref:a,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});J.displayName=L.hE.displayName;let P=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(L.VY,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",t),...r})});P.displayName=L.VY.displayName;var F=t(7003),V=t(7001),B=t(235),M=t(8720);function O(e){let{code:a,isOpen:t,onClose:l,qrImageUrl:n,onUpdateSuccess:d}=e,[i,o]=(0,r.useState)("");(0,r.useEffect)(()=>{a&&("label"in a?o(a.label||""):"note"in a?o(a.note||""):o(""))},[a]);let c=async()=>{let e;a&&((e="label"in a?await k(a._id,i):await S(a._id,i)).success?(M.oR.success(e.message),d(),l()):M.oR.error(e.message))};if(!a)return null;let m="label"in a;return(0,s.jsx)(D,{open:t,onOpenChange:l,children:(0,s.jsxs)(U,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(E,{children:[(0,s.jsx)(J,{children:m?"Generated Code Details":"Scanned Code Details"}),(0,s.jsxs)(P,{children:["View details and update the ",m?"label":"note","."]})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsx)("div",{className:"flex justify-center",children:n?(0,s.jsx)("img",{src:n,alt:"QR Code",className:"w-48 h-48 rounded-md"}):(0,s.jsx)("div",{className:"w-48 h-48 bg-gray-200 animate-pulse rounded-md"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(B.J,{children:"Data"}),(0,s.jsx)("p",{className:"text-sm font-mono p-2 bg-muted rounded-md break-all",children:a.data})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(B.J,{htmlFor:"edit-field",children:m?"Label":"Note"}),m?(0,s.jsx)(f.p,{id:"edit-field",value:i,onChange:e=>o(e.target.value)}):(0,s.jsx)(V.T,{id:"edit-field",value:i,onChange:e=>o(e.target.value)})]})]}),(0,s.jsxs)(Z,{children:[(0,s.jsx)(_,{asChild:!0,children:(0,s.jsx)(F.$,{type:"button",variant:"secondary",children:"Cancel"})}),(0,s.jsx)(F.$,{type:"button",onClick:c,children:"Save changes"})]})]})})}var q=t(4690),$=t(859),G=t(1047);function I(){let[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[d,x]=(0,r.useState)(!0),[p,g]=(0,r.useState)(null),[h,N]=(0,r.useState)(""),[j,R]=(0,r.useState)("newest"),[k,S]=(0,r.useState)(null),[L,A]=(0,r.useState)(""),[D,z]=(0,r.useState)({}),_=async()=>{g(null);try{let[e,t]=await Promise.all([fetch("/api/generated"),fetch("/api/scanned")]);if(!e.ok||!t.ok)throw Error("Failed to fetch data");let s=await e.json(),r=await t.json();a(s),n(r)}catch(e){g(e instanceof Error?e.message:"An unknown error occurred")}finally{d&&x(!1)}};(0,r.useEffect)(()=>{_()},[]),(0,r.useEffect)(()=>{k&&(async()=>{A(await l.toDataURL(k.data,{width:256,margin:2,color:{dark:"foregroundColor"in k?k.foregroundColor:"#000000",light:"backgroundColor"in k?k.backgroundColor:"#ffffff"}}))})()},[k]);let T=(0,r.useMemo)(()=>e.filter(e=>{var a;return(null==(a=e.label)?void 0:a.toLowerCase().includes(h.toLowerCase()))||e.data.toLowerCase().includes(h.toLowerCase())}).sort((e,a)=>"newest"===j?new Date(a.createdAt).getTime()-new Date(e.createdAt).getTime():"oldest"===j?new Date(e.createdAt).getTime()-new Date(a.createdAt).getTime():"az"===j?(e.label||"").localeCompare(a.label||""):"za"===j?(a.label||"").localeCompare(e.label||""):0),[e,h,j]),U=(0,r.useMemo)(()=>t.filter(e=>{var a;return(null==(a=e.note)?void 0:a.toLowerCase().includes(h.toLowerCase()))||e.data.toLowerCase().includes(h.toLowerCase())}).sort((e,a)=>"newest"===j?new Date(a.scannedAt).getTime()-new Date(e.scannedAt).getTime():"oldest"===j?new Date(e.scannedAt).getTime()-new Date(a.scannedAt).getTime():0),[t,h,j]);return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("div",{className:"bg-card shadow-sm border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)(f.p,{placeholder:"Search by label, note, or data...",value:h,onChange:e=>N(e.target.value),className:"w-full"})}),(0,s.jsx)("div",{className:"relative z-10",children:(0,s.jsxs)(b,{value:j,onValueChange:R,children:[(0,s.jsx)(w,{className:"w-[200px]",children:(0,s.jsx)(v,{placeholder:"Sort by"})}),(0,s.jsxs)(y,{className:"absolute w-[200px]",children:[(0,s.jsx)(C,{value:"newest",children:"Date: Newest"}),(0,s.jsx)(C,{value:"oldest",children:"Date: Oldest"}),(0,s.jsx)(C,{value:"az",children:"Label: A-Z"}),(0,s.jsx)(C,{value:"za",children:"Label: Z-A"})]})]})})]})}),(0,s.jsxs)(i,{defaultValue:"generated",className:"w-full",children:[(0,s.jsxs)(o,{className:"w-full max-w-md mx-auto mb-6",children:[(0,s.jsx)(c,{value:"generated",className:"flex-1",children:"Generated"}),(0,s.jsx)(c,{value:"scanned",className:"flex-1",children:"Scanned"})]}),(0,s.jsx)(m,{value:"generated",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-6",children:T.map(e=>(0,s.jsx)(u.Zp,{onClick:()=>S(e),className:"cursor-pointer hover:shadow-lg transition-all hover:scale-[1.02] border-2",children:(0,s.jsxs)(u.aR,{className:"space-y-4",children:[(0,s.jsx)(u.ZB,{className:"text-xl truncate",children:e.label||"Untitled"}),(0,s.jsx)("div",{className:"bg-muted aspect-square rounded-lg p-6 flex items-center justify-center",children:D[e._id]&&(0,s.jsx)("img",{src:"data:image/svg+xml;base64,".concat(btoa(D[e._id])),alt:e.label||"QR",className:"w-full h-full object-contain"})})]})},e._id))})}),(0,s.jsx)(m,{value:"scanned",children:(0,s.jsx)("div",{className:"space-y-4",children:U.map(e=>(0,s.jsx)(u.Zp,{onClick:()=>S(e),className:"cursor-pointer hover:shadow-lg transition-all hover:scale-[1.01] border-2",children:(0,s.jsx)(u.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-6",children:[(0,s.jsx)("div",{className:"bg-muted p-4 rounded-lg",children:(0,s.jsx)(q.A,{className:"w-8 h-8"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[(0,s.jsx)($.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"font-medium",children:"Data"})]}),(0,s.jsx)("p",{className:"text-lg font-mono break-all",children:e.data}),e.note&&(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-muted-foreground mt-4",children:[(0,s.jsx)(G.A,{className:"w-4 h-4 mt-1 flex-shrink-0"}),(0,s.jsx)("p",{className:"italic",children:e.note})]})]}),(0,s.jsx)("time",{className:"text-sm text-muted-foreground whitespace-nowrap",children:new Date(e.scannedAt).toLocaleDateString()})]})})},e._id))})}),(0===T.length||0===U.length)&&!d&&(0,s.jsx)("p",{className:"text-center mt-8 text-muted-foreground text-lg",children:"No matching codes found."})]}),(0,s.jsx)(O,{isOpen:!!k,onClose:()=>S(null),code:k,qrImageUrl:L,onUpdateSuccess:_})]})}}},e=>{e.O(0,[720,876,769,619,132,441,255,358],()=>e(e.s=2643)),_N_E=e.O()}]);